<!DOCTYPE>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>sightReading</title>
	<script src="js/decodeAbc.js" type="text/javascript"></script>
	<script src="js/decodeAjaxResponse.js" type="text/javascript"></script>
	<script src="js/init.js" type="text/javascript"></script>
	<script src="js/drawings.js" type="text/javascript"></script>
	<script src="js/variables.js" type="text/javascript"></script>
	<script src="js/populateSelect.js" type="text/javascript"></script>
	<script src="js/ajax/ajax.js" type="text/javascript"></script>
	<script src="js/tempo.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<!-- <script src="js/abcjs_basic_3.1.2-min.js" type="text/javascript"></script> -->
	<!-- <script src="js/abcjs_basic_3.1.1-min.js" type="text/javascript"></script> -->
	<!-- <script src="js/abcjs_editor_3.1.2-min.js" type="text/javascript"></script> -->
	<!-- <script src="abcjs_basic_midi_3.1.1-min.js" type="text/javascript"></script> -->
	<!-- <script src="js/abcjs_plugin_2.3-min.js" type="text/javascript"></script> -->
</head>
<!-- <body onload="init();"> --> 
<!-- <body> -->
<body onload="populateAjax();init();">
<div id="fallos">Fallos:</div>
<div id="mediaError">M(%):</div>
<div id="primeraLinea">
    <button id="populateSelect">select pattern--</button>
    <select id="mySelect" onchange="drawOption()">
        <option value="" ></option>
        <!-- <option value="barbershop">barbershop</option> -->
    </select>
    <button id="tempoDoble" onclick="doblarTempo();">doblarTempo</button>
    <button id="tempo"></button>
    <!-- <button id="cambiarBpm" onclick="cambiarBpm();">cambiarBpm</button> -->
    <select id="cambiarBpm" onchange="cambiarBpm(value)">
        <option ></option>
        <option value="40" >40</option>
        <option value="60" >60</option>
        <option value="80" >80</option>
        <option value="100" >100</option>
    </select>
</div>
<button id="buttonReinitiate" onclick='reinitiate();' style="display: inline-block;width:12%; height:40px; left:50%; position: relative;">reiniciarPrueba</button>


<!-- <p id="songVariable"></p> -->
<pre id="preId"></pre> 
<div id="midi"></div>

<button id="button"  onmousedown="clickButton()" style="display: inline-block;width:20%; height:590px;margin-left: 0; position: fixed; right:0; top: 150px">touch</button>
 <br><hr>
<!-- <button id="buttonReinitiate" onclick='reinitiate();' style="display: inline-block;width:25%; height:40px; left:70%; position: relative;">reiniciarPrueba</button> -->
 <!-- <a href="#" onClick="MIDIjs.play('011628922695.23.24.63.mid');">Play hinematov.mid</a> -->
</body>
	<script>
		//cuando se cambia el tempo, se vuelve automaticament a un bpm No doblado
		velocidadDoblada = false;
		// song = '000.abc';
		ajax(song);/**/
		//damos valor a los botones
		document.getElementById('tempo').innerHTML = bpm;
		document.getElementById('cambiarBpm').value = bpm;
		console.log("bpm : " + bpm);

		function appendSong(argument) {
			//para evitar el bug "<""
			decodeAjaxResponse(argument);
			// argument = argument.replace("<", "&lt");//
			argument = argument.replace(/</g, "&lt");//
			// console.log("argument : " + argument);

			document.getElementById('preId').innerHTML = argument;		
			// console.log(document.getElementsByTagName("pre"));

			loadMyJs('js/abcjs_plugin_2.3-min.js');
			
			// document.getElementsByClassName("abctext")[0].innerHTML = appendHtml;
		}
	</script>
	<!-- para que el abcjs se aplique despues del ajax -->
	<script type="text/javascript">

		function loadMyJs(scriptName) {
			// console.log("loadJs");
			var docHeadObj = document.getElementsByTagName("head")[0];
			var dynamicScript = document.createElement("script");
			dynamicScript.type = "text/javascript";
			dynamicScript.src = scriptName;
			docHeadObj.appendChild(dynamicScript);
		}

	</script>
	

<script type='text/javascript' src='//www.midijs.net/lib/midi.js'></script>





</html>
